
CC = {CC}
CFLAGS = -I../../include {ARCHFLAGS} {AOFLAGS} {DEBUGFLAGS}
CLIBS = {ARCHLIBS} {AOLIBS}
MODULES = uade-trivial.o strlrep.o unixatomic.o uadecontrol.o amifilemagic.o \
	chrarray.o playlist.o

uade123:	$(MODULES)
	$(CC) $(CFLAGS) $(CLIBS) -o $@ $(MODULES)

uade-trivial.o:	uade-trivial.c ../../include/uademsg.h ../../include/uadeconfig.h
	$(CC) $(CFLAGS) -c $<

strlrep.o:	../../strlrep.c ../../include/strlrep.h
	$(CC) $(CFLAGS) -o strlrep.o -c ../../strlrep.c

unixatomic.o:	../../unixatomic.c ../../include/unixatomic.h
	$(CC) $(CFLAGS) -o unixatomic.o -c ../../unixatomic.c

uadecontrol.o:	../../uadecontrol.c ../../include/uadecontrol.h ../../include/uademsg.h
	$(CC) $(CFLAGS) -o uadecontrol.o -c ../../uadecontrol.c

amifilemagic.o:	../../amifilemagic.c ../../include/amifilemagic.h
	$(CC) $(CFLAGS) -o amifilemagic.o -c ../../amifilemagic.c

chrarray.o:	chrarray.c chrarray.h
	$(CC) $(CFLAGS) -c chrarray.c

playlist.o:	playlist.c playlist.h
	$(CC) $(CFLAGS) -c playlist.c

test:	
	./uade123 -c ../../../uaerc -u ../../uadecore -s ../../../score -p ../../FC1.3 -m ../../fc13.smod7

clean:	
	rm -f uade1337 *.o
