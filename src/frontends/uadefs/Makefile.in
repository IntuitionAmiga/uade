BINDIR = {PACKAGEPREFIX}{BINDIR}
MANDIR = {PACKAGEPREFIX}{MANDIR}
UADE123NAME={UADE123NAME}

CC = {CC}
CFLAGS = -Wall -O2 -pthread -I../../include -I../common `pkg-config fuse --cflags` -DUADENAME=\"{BINDIR}/{UADE123NAME}\" {DEBUGFLAGS} {ARCHFLAGS}
CLIBS = {ARCHLIBS} `pkg-config fuse --libs` -lm

MODULES = uadefs.o \
          strlrep.o unixatomic.o uadeipc.o amifilemagic.o \
	  eagleplayer.o effects.o uadecontrol.o uadeconf.o md5.o \
	  ossupport.o songdb.o songinfo.o vplist.o support.o

PLAYERHEADERS = ../common/eagleplayer.h ../common/uadeconf.h ../common/uadeconfstructure.h ../../include/uadeconfig.h


%.o:	%.c
	$(CC) $(CFLAGS) -c $<

all:	uadefs

uadefs:	$(MODULES)
	$(CC) $(CFLAGS) $(CLIBS) -o $@ $(MODULES)

uadefs.o:	uadefs.c

install:	uadefs
	mkdir -p "$(BINDIR)" "$(MANDIR)"
	install uadefs "$(BINDIR)"/
	install uadefs.1 "$(MANDIR)"/

clean:	
	rm -f uadefs *.o

include ../common/Makefile.common
